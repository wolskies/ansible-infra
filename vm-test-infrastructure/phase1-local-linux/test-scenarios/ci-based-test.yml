---
# VM Test Scenario Based on Proven CI Configuration
# Copied from molecule/configure_system/molecule.yml patterns

# Hostname configuration
host_hostname: "{{ inventory_hostname }}"
host_update_hosts: true

# Package management - using proven CI structure
packages:
  present:
    all:
      Ubuntu:
        - curl
        - wget
        - git
        - vim
        - htop
        - fail2ban
        - ufw
      Debian:
        - curl
        - wget
        - git
        - vim
        - htop
        - fail2ban
        - ufw
    host:
      Ubuntu:
        - jq
        - tree
      Debian:
        - jq
        - tree

# Users - using proven CI structure
users:
  - name: developer
    uid: 1001
    groups: [sudo]
    shell: /bin/bash
    comment: "Developer User"
    state: present
    create_home: true
    ssh_keys:
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... developer@test"
    nodejs:
      packages:
        - typescript
        - eslint
    rust:
      packages:
        - ripgrep
        - cargo-watch
    go:
      packages:
        - github.com/charmbracelet/glow@latest
    neovim:
      enabled: true
    terminal_entries:
      - alacritty
      - kitty

# Firewall configuration
firewall:
  enabled: true
  rules:
    - rule: allow
      port: 22
      proto: tcp
      comment: "SSH"

# Language environments (copied from CI)
dev_nodejs:
  install: true
  version: "20"

dev_rust:
  install: true

dev_go:
  install: true

# Security services
fail2ban:
  enabled: true
  defaults:
    maxretry: 3
    bantime: 3600

# Snap configuration
snap:
  disable_and_remove: true
