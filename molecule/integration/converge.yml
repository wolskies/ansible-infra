---
- name: Integration test - multiple roles
  hosts: all
  gather_facts: true
  tasks:
    - name: Apply configure_host role
      ansible.builtin.include_role:
        name: wolskinet.infrastructure.configure_host

    - name: Apply manage_packages role
      ansible.builtin.include_role:
        name: wolskinet.infrastructure.manage_packages

    - name: Apply manage_users role (basic test)
      ansible.builtin.include_role:
        name: wolskinet.infrastructure.manage_users
      vars:
        users_config:
          - name: testuser
            state: present
            groups: []