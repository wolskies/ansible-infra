---
# Simple prepare for discovery testing
- name: Prepare discovery test environment
  hosts: discovery_targets
  gather_facts: true
  tasks:
    - name: Install basic packages for testing
      ansible.builtin.package:
        name:
          - git
          - curl
          - vim
        state: present

    - name: Create test user
      ansible.builtin.user:
        name: testuser
        uid: 1500
        shell: /bin/bash
        create_home: true

    - name: Create .dotfiles directory for test user
      ansible.builtin.file:
        path: "/home/testuser/.dotfiles"
        state: directory
        owner: testuser
        mode: '0755'