---
- name: Converge
  hosts: all
  gather_facts: true
  tasks:
    - name: Test configure_user role
      ansible.builtin.include_role:
        name: wolskinet.infrastructure.configure_user
      tags:
        - user-config

    # Test idempotency by running again
    - name: Test configure_user role idempotency
      ansible.builtin.include_role:
        name: wolskinet.infrastructure.configure_user
      tags:
        - user-config
        - idempotency
