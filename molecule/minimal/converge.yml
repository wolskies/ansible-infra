---
- name: Test minimal configuration handling
  hosts: all
  gather_facts: true
  tasks:
    # Test configure_operating_system with minimal config - should not fail
    - name: Test configure_operating_system role with minimal config
      ansible.builtin.include_role:
        name: wolskies.infrastructure.configure_operating_system
      tags: minimal-test

    # Test user management (now part of configure_operating_system) with minimal config - should not fail
    - name: Test user management with minimal config
      ansible.builtin.include_role:
        name: wolskies.infrastructure.configure_operating_system
      tags:
        - minimal-test
        - users

    # Test configure_software with minimal config - should not fail
    - name: Test configure_software role with minimal config
      ansible.builtin.include_role:
        name: wolskies.infrastructure.configure_software
      tags: minimal-test
