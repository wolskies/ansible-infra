---
- name: Verify role functionality
  hosts: all
  gather_facts: false
  tasks:
    - name: Verify packages were installed
      ansible.builtin.command: which {{ item }}
      loop:
        - curl
        - wget
      changed_when: false

    - name: Check basic system configuration
      ansible.builtin.stat:
        path: /etc/systemd/timesyncd.conf
      register: timesyncd_config

    - name: Validate timesyncd config exists
      ansible.builtin.assert:
        that:
          - timesyncd_config.stat.exists
        fail_msg: "timesyncd config should exist"