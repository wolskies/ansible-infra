---
# Default converge playbook - tests a single role
- name: Converge
  hosts: all
  gather_facts: true
  tasks:
    - name: "Include {{ role_name | default('role under test') }}"
      ansible.builtin.include_role:
        name: "{{ role_name_full | default('wolskinet.infrastructure.' + (role_name | default('configure_host'))) }}"
      when: role_name is defined

    - name: Display message when no role specified
      ansible.builtin.debug:
        msg: "No specific role to test. Use role_name variable to specify a role."
      when: role_name is not defined