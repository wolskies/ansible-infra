---
# manage_flatpak role main tasks

- name: Manage flatpak packages
  ansible.builtin.include_tasks: manage-flatpak.yml
  when:
    - ansible_os_family in ["Debian", "Archlinux"]
    - infrastructure[ansible_distribution] is defined
    - infrastructure[ansible_distribution].flatpak.enabled | default(false)
    - >-
      (infrastructure[ansible_distribution].flatpak.packages.install | default([]) | length > 0) or
      (infrastructure[ansible_distribution].flatpak.packages.remove | default([]) | length > 0)
  tags: []
