# Docker Compose template for container services
# Generated by Ansible container_platform role

version: '3.8'

services:
{% for service in container_services | default([]) %}
  {{ service.name }}:
    image: {{ service.image }}
{% if service.ports is defined %}
    ports:
{% for port in service.ports %}
      - "{{ port }}"
{% endfor %}
{% endif %}
{% if service.environment is defined %}
    environment:
{% for key, value in service.environment.items() %}
      {{ key }}: "{{ value }}"
{% endfor %}
{% endif %}
{% if service.volumes is defined %}
    volumes:
{% for volume in service.volumes %}
      - "{{ volume }}"
{% endfor %}
{% endif %}
{% if service.restart is defined %}
    restart: {{ service.restart }}
{% endif %}
{% if not loop.last %}

{% endif %}
{% endfor %}