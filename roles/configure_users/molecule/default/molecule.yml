dependency:
  name: galaxy
driver:
  name: docker
platforms:
  - name: ubuntu-user-full
    image: geerlingguy/docker-ubuntu2404-ansible:latest
    pre_build_image: true
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    cgroupns_mode: host
    command: /lib/systemd/systemd
    tmpfs:
      - /tmp
      - /run
  - name: ubuntu-user-basic
    image: geerlingguy/docker-ubuntu2404-ansible:latest
    pre_build_image: true
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    cgroupns_mode: host
    command: /lib/systemd/systemd
    tmpfs:
      - /tmp
      - /run
  - name: ubuntu-user-privileged
    image: geerlingguy/docker-ubuntu2404-ansible:latest
    pre_build_image: true
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    cgroupns_mode: host
    command: /lib/systemd/systemd
    tmpfs:
      - /tmp
      - /run
  - name: arch-user-basic
    image: carlodepieri/docker-archlinux-ansible:latest
    pre_build_image: true
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    cgroupns_mode: host
    command: /usr/lib/systemd/systemd
    env:
      container: docker
    capabilities:
      - SYS_ADMIN
    ulimits:
      - nofile:65535:65535
    tmpfs:
      - /tmp
      - /run
  - name: ubuntu-user-edge-cases
    image: geerlingguy/docker-ubuntu2404-ansible:latest
    pre_build_image: true
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    cgroupns_mode: host
    command: /lib/systemd/systemd
    tmpfs:
      - /tmp
      - /run
provisioner:
  name: ansible
  config_options:
    defaults:
      remote_tmp: /tmp/ansible-remote-tmp
      local_tmp: /tmp/ansible-local-tmp
      host_key_checking: false
      stdout_callback: ansible.builtin.default
      stdout_callback_format: yaml
  playbooks:
    converge: converge.yml
  inventory:
    group_vars:
      all:
        ansible_user: root
        molecule_test: true
        test_password_hash: "!"
    host_vars:
      ubuntu-user-full:
        users:
          - name: fulluser
            nodejs:
              packages:
                - "@angular/cli"
                - typescript
            rust:
              packages:
                - cargo-watch
                - ripgrep
            go:
              packages: []
            neovim:
              enabled: true
            git:
              user_name: Full User
              user_email: fulluser@example.com
              editor: nvim
            dotfiles:
              enable: true
              repository: file:///tmp/mock-dotfiles
              dest: .dotfiles
              branch: main
      ubuntu-user-basic:
        users:
          - name: root
            git:
              user_name: Root User
              user_email: root@test.local
          - name: existinguser
            git:
              user_name: Existing User
              user_email: existing@test.local
      ubuntu-user-privileged:
        users:
          - name: privilegeduser
      arch-user-basic:
        users:
          - name: archuser
      ubuntu-user-edge-cases: {}
verifier:
  name: ansible
