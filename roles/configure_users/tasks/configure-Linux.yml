---
# Linux OS-specific user configuration

- name: Set user shell preference for {{ target_user.name }}
  ansible.builtin.user:
    name: "{{ target_user.name }}"
    shell: "{{ target_user.shell }}"
  become: true
  become_user: root
  when:
    - target_user.shell is defined
    - target_user.shell != ''
  tags:
    - shell
