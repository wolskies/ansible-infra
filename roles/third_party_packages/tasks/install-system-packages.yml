---
# Install third-party system packages (after repositories are configured)

- name: Install third-party packages (Debian/Ubuntu)
  ansible.builtin.package:
    name: "{{ third_party_packages }}"
    state: present
  become: true
  when: ansible_os_family == "Debian"
  tags:
    - system-packages
    - apt

- name: Install third-party packages (Arch Linux)
  community.general.pacman:
    name: "{{ third_party_packages }}"
    state: present
  become: true
  when: ansible_distribution == "Archlinux"
  tags:
    - system-packages
    - pacman

- name: Install third-party packages (macOS)
  community.general.homebrew:
    name: "{{ third_party_packages }}"
    state: present
  when: ansible_os_family == "Darwin"
  tags:
    - system-packages
    - homebrew

- name: Verify third-party packages installation
  ansible.builtin.debug:
    msg: "Installed {{ third_party_packages | length }} third-party packages"
  tags:
    - system-packages
    - verification