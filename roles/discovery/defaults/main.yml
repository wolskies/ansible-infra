---
# Discovery Role Default Variables - Simplified

# Discovery output settings
discovery:
  # Output paths - defaults to ./inventory and ./playbooks from where ansible-playbook is run
  # Override these in your playbook to control output location:
  #   discovery:
  #     inventory_dir: "/absolute/path/to/inventory"
  #     playbooks_dir: "/absolute/path/to/playbooks"
  generate_configs: true
  timeout: 300

# Docker Compose discovery configuration
discovery_docker_compose_dir: "/opt/docker"  # Default compose directory to scan

# Docker service mapping - maps container images to collection roles
discovery_docker_service_mapping:
  # Canned services with dedicated roles
  "gitlab/gitlab-ce": "gitlab"
  "gitlab/gitlab-ee": "gitlab"
  "ghcr.io/paperless-ngx/paperless-ngx": "paperless"
  "paperless-ngx/paperless-ngx": "paperless"
  "jc21/nginx-proxy-manager": "nginx_proxy_manager"
  "jellyfin/jellyfin": "jellyfin"
  "ghcr.io/gethomepage/homepage": "homepage"
  "benphelps/homepage": "homepage"

  # Infrastructure services
  "portainer/portainer-ce": "portainer"
  "portainer/portainer-ee": "portainer"

# Shell detection and configuration
discovery_shell_configuration:
  supported_shells:
    - /bin/bash
    - /bin/zsh
    - /usr/bin/fish

  config_files:
    bash:
      - .bashrc
      - .bash_profile
      - .profile
    zsh:
      - .zshrc
      - .zsh_profile
      - .profile
    fish:
      - .config/fish/config.fish

# Repository detection configuration
repository_detection:
  pacman:
    config: "/etc/pacman.conf"
    mirrorlist: "/etc/pacman.d/mirrorlist"
  aur_helpers:
    - yay
    - paru
    - trizen
  homebrew:
    paths:
      - "/opt/homebrew/bin/brew"
      - "/usr/local/bin/brew"

discovery_repository_detection:
  apt:
    keys_paths:
      - "/etc/apt/trusted.gpg.d"
      - "/usr/share/keyrings"

# Dotfiles detection
discovery_dotfiles_detection:
  repository_indicators:
    - .dotfiles
    - .config

  management_tools:
    - Makefile
    - install.sh
    - bootstrap.sh
    - setup.sh
    - stow
    - .stow-local-ignore
