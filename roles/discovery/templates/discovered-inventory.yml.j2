# Auto-generated inventory for {{ inventory_hostname }}
# Generated from infrastructure discovery on {{ ansible_date_time.iso8601 }}
# Review and update with your actual IP addresses
# Format compatible with existing ~/Ansible/inventory structure

{% if discovery_profile.desktop.has_gui %}
workstations:
  hosts:
    {{ inventory_hostname }}:
      ansible_host: UPDATE_WITH_ACTUAL_IP  # Was: {{ discovery_profile.network.default_ipv4.address | default('unknown') }}
{% endif %}

{% if discovery_profile.docker.installed %}
docker_hosts:
  hosts:
    {{ inventory_hostname }}:
      {% if not discovery_profile.desktop.has_gui %}
      ansible_host: UPDATE_WITH_ACTUAL_IP  # Was: {{ discovery_profile.network.default_ipv4.address | default('unknown') }}
      {% endif %}
      # Discovered services for potential deployment
      services_deploy:
{% for container in discovery_profile.docker.containers[:5] %}  # Limit to 5 containers
        # - {{ container.split(':')[0] | replace('/', '-') }}  # Review and uncomment: {{ container }}
{% endfor %}
{% endif %}

{% if 'ssh' in discovery_profile.services.running and not discovery_profile.desktop.has_gui %}
infra:
  hosts:
    {{ inventory_hostname }}:
      {% if not discovery_profile.docker.installed %}
      ansible_host: UPDATE_WITH_ACTUAL_IP  # Was: {{ discovery_profile.network.default_ipv4.address | default('unknown') }}
      {% endif %}
{% endif %}

# Application-specific groups (add hosts to these as needed)
{% if 'nginx' in discovery_profile.services.running or discovery_profile.service_configs.nginx_sites %}
nginx_hosts:
  hosts:
    {{ inventory_hostname }}:
{% endif %}

{% if discovery_profile.service_configs.apache_sites %}
apache_hosts:
  hosts:
    {{ inventory_hostname }}:
{% endif %}

{% if 'gitlab' in discovery_profile.docker.containers | join(' ') %}
gitlab_hosts:
  hosts:
    {{ inventory_hostname }}:
{% endif %}

{% if 'nextcloud' in discovery_profile.docker.containers | join(' ') %}
nextcloud_hosts:
  hosts:
    {{ inventory_hostname }}:
{% endif %}

{% if 'paperless' in discovery_profile.docker.containers | join(' ') %}
paperless_hosts:
  hosts:
    {{ inventory_hostname }}:
{% endif %}

# TODO: Review and update all ansible_host entries with actual IP addresses
# TODO: Configure secrets in group_vars vault files
# TODO: Verify services_deploy lists match your available Docker services