#SPDX-License-Identifier: MIT
---
- name: restart timesyncd
  ansible.builtin.systemd:
    name: systemd-timesyncd
    state: restarted
  become: true
  when: ansible_virtualization_type | default('') != 'docker'
  failed_when: false

- name: restart journald
  ansible.builtin.systemd:
    name: systemd-journald
    state: restarted
  become: true
  when: ansible_virtualization_type | default('') != 'docker'
  failed_when: false

- name: restart rsyslog
  ansible.builtin.systemd:
    name: rsyslog
    state: restarted
  become: true
  when: ansible_virtualization_type | default('') != 'docker'
  failed_when: false

- name: restart cfprefsd
  ansible.builtin.command: killall cfprefsd
  become: true
  when: ansible_distribution == 'MacOSX'
  failed_when: false
