---
- name: Prepare container for testing
  hosts: all
  become: true
  tasks:
    - name: Install acl package for proper become support (Debian/Ubuntu)
      ansible.builtin.apt:
        name: acl
        state: present
        update_cache: true
      when: ansible_os_family == 'Debian'

    - name: Install acl package for proper become support (Arch Linux)
      community.general.pacman:
        name: acl
        state: present
        update_cache: true
      when: ansible_os_family == 'Archlinux'

    - name: Install auditd for service management testing (Debian/Ubuntu)
      ansible.builtin.apt:
        name: auditd
        state: present
      when:
        - ansible_os_family == 'Debian'
        - inventory_hostname == 'ubuntu-full-positive'
