---
# manage_snap_packages role main tasks

- name: Disable and remove snap system (primary use case)
  ansible.builtin.include_tasks: disable-snap.yml
  when:
    - ansible_os_family == "Debian"
    - snap.disable_and_remove | default(false)
  tags:
    - snap-packages

- name: Manage specific snap packages (when snap system is enabled)
  ansible.builtin.include_tasks: manage-packages.yml
  when:
    - ansible_os_family == "Debian"
    - not (snap.disable_and_remove | default(false))
    - >-
      (snap.packages.install | default([]) | length > 0) or
      (snap.packages.remove | default([]) | length > 0)
  tags:
    - snap-packages
