---
# Cross-platform user configuration

- name: Configure Git settings for {{ target_user.name }}
  block:
    - name: Set Git user name
      community.general.git_config:
        name: user.name
        value: "{{ target_user.git.user_name }}"
        scope: global
      when: target_user.git.user_name is defined

    - name: Set Git user email
      community.general.git_config:
        name: user.email
        value: "{{ target_user.git.user_email }}"
        scope: global
      when: target_user.git.user_email is defined

    - name: Set Git default editor
      community.general.git_config:
        name: core.editor
        value: "{{ target_user.git.editor }}"
        scope: global
      when: target_user.git.editor is defined
  become: true
  become_user: "{{ target_user.name }}"
  when: target_user.git is defined
  tags: git
