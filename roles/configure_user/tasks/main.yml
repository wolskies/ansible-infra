---
# Configure user preferences
# Accepts users (list of user configuration objects)

- name: Configure preferences for each user
  ansible.builtin.include_tasks: configure-single-user.yml
  loop: "{{ users }}"
  loop_control:
    loop_var: target_user
  when:
    - users is defined
    - users | length > 0
    - target_user.name is defined
    - target_user.name != 'root' # Skip system accounts
