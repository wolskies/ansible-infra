#SPDX-License-Identifier: MIT
---
# handlers file for roles/configure_host

- name: restart timesyncd
  ansible.builtin.systemd:
    name: systemd-timesyncd
    state: restarted
  become: true
  when: ansible_virtualization_type | default('') != 'docker'
  failed_when: false

# restart sshd handler removed for security reasons
# - SSH service restart without configuration validation is dangerous
# - Could cause administrator lockout if SSH config becomes invalid

- name: restart journald
  ansible.builtin.systemd:
    name: systemd-journald
    state: restarted
  become: true
  when: ansible_virtualization_type | default('') != 'docker'
  failed_when: false

- name: restart reflector
  ansible.builtin.systemd:
    name: reflector.timer
    state: restarted
  become: true
  when: ansible_virtualization_type | default('') != 'docker'
  failed_when: false

- name: generate locales
  ansible.builtin.command: locale-gen
  become: true
