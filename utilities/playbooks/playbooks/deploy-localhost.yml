# Replication playbook for localhost
# Generated from infrastructure discovery on 2025-08-20T12:27:06Z
# 
# Replicates discovered configuration using basic_setup role and discovered variables.
# Source OS: Archlinux NA

---
- name: Replicate discovered configuration for localhost
  hosts: localhost
  gather_facts: true
  become: true
  
  collections:
    - wolskinet.infrastructure
    - community.general    - community.docker
  pre_tasks:
    - name: Display replication information
      ansible.builtin.debug:
        msg:
          - "=== Configuration Replication ==="
          - "Target host: localhost"
          - "Source OS: Archlinux NA"
          - "Target OS: Archlinux NA"
          - "Discovery date: 2025-08-20T12:27:06Z"
          - ""
          - "Package installation approach:"
          - "  ‚Ä¢ Looking for: packages_install_Archlinux"
          - "  ‚Ä¢ Discovered: packages_install_Archlinux (114 packages)"
          - "  ‚Ä¢ Cross-OS: Add equivalent packages manually if needed"

  roles:
    # Core system setup with discovered packages and configuration
    - name: wolskinet.infrastructure.basic_setup    
    # Container platform setup (Docker detected on source)
    - name: wolskinet.infrastructure.container_platform
      when: docker_detected | default(false)    
    # Dotfiles management (repository detected on source)  
    - name: wolskinet.infrastructure.dotfiles
      become: false
      when: dotfiles_detected | default(false)    
    # System maintenance and updates
    - name: wolskinet.infrastructure.maintenance

  post_tasks:
    - name: Display replication results
      ansible.builtin.debug:
        msg:
          - "‚úÖ Configuration replication completed for localhost"
          - ""
          - "üì¶ Package installation:"
          - "   ‚Ä¢ OS packages: 0 for Archlinux"
          - "   ‚Ä¢ AUR packages: 0 (Arch only)"
          - "   ‚Ä¢ Homebrew packages: 4 (macOS only)"
          - "   ‚Ä¢ Python packages: 13"
          - "   ‚Ä¢ Node.js packages: 13"          - ""
          - "üê≥ Docker: Configuration applied"
          - "   ‚Ä¢ Note: Containers/volumes not automatically recreated"          - ""
          - "‚öôÔ∏è  Dotfiles: Repository configured"          - ""
          - "üîç Manual verification recommended:"
          - "   1. Compare package lists with original system"
          - "   2. Verify services are running as expected" 
          - "   3. Test application functionality"          - "   4. Recreate Docker containers/volumes as needed"          - "   5. Verify dotfiles are properly deployed"          - ""
          - "Machine characteristics: none detected"
          - "Replication should closely match original localhost configuration"